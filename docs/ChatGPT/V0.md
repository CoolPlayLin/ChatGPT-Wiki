<a id="revChatGPT.V0"></a>

# revChatGPT.V0

官方 ChatGPT API 的简单包装

<a id="revChatGPT.V0.get_max_tokens"></a>

#### 获取最大令牌数

```python
def get_max_tokens(prompt: str) -> int
```

获取提示的最大令牌数

<a id="revChatGPT.V0.remove_suffix"></a>

#### 删除后缀

```python
def remove_suffix(input_string: str, suffix: str) -> str
```

从字符串中删除后缀（支持 Python 3.8）

<a id="revChatGPT.V0.Chatbot"></a>

## Chatbot 对象

```python
class Chatbot()
```

官方 ChatGPT API

<a id="revChatGPT.V0.Chatbot.__init__"></a>

#### 初始化

```python
def __init__(api_key: str,
             buffer: int = None,
             engine: str = None,
             proxy: str = None) -> None
```

使用 API 密钥初始化 Chatbot (从 https://platform.openai.com/account/api-keys 获取)

<a id="revChatGPT.V0.Chatbot.ask"></a>

#### 询问

```python
def ask(user_request: str,
        temperature: float = 0.5,
        conversation_id: str = None,
        user: str = "User") -> dict
```

向 ChatGPT 发送请求并返回响应

<a id="revChatGPT.V0.Chatbot.ask_stream"></a>

#### 流式询问

```python
def ask_stream(user_request: str,
               temperature: float = 0.5,
               conversation_id: str = None,
               user: str = "User") -> str
```

向 ChatGPT 发送请求并生成响应

<a id="revChatGPT.V0.Chatbot.make_conversation"></a>

#### 生成 conversation

```python
def make_conversation(conversation_id: str) -> None
```

生成一个 conversation

<a id="revChatGPT.V0.Chatbot.rollback"></a>

#### 回滚

```python
def rollback(num: int) -> None
```

回滚聊天记录次数

<a id="revChatGPT.V0.Chatbot.reset"></a>

#### 重置

```python
def reset() -> None
```

重置聊天记录

<a id="revChatGPT.V0.Chatbot.load_conversation"></a>

#### 加载 conversation

```python
def load_conversation(conversation_id: str) -> None
```

从聊天记录中加载 conversation

<a id="revChatGPT.V0.Chatbot.save_conversation"></a>

#### 保存 conversation

```python
def save_conversation(conversation_id: str) -> None
```

把 conversation 保存到聊天记录中

<a id="revChatGPT.V0.AsyncChatbot"></a>

## AsyncChatbot 对象

```python
class AsyncChatbot(Chatbot)
```

官方 ChatGPT API (异步)

<a id="revChatGPT.V0.AsyncChatbot.ask"></a>

#### 询问

```python
async def ask(user_request: str,
              temperature: float = 0.5,
              user: str = "User") -> dict
```

异步函数，功能与 Chatbot.ask 相同

<a id="revChatGPT.V0.AsyncChatbot.ask_stream"></a>

#### 流式询问

```python
async def ask_stream(user_request: str,
                     temperature: float = 0.5,
                     user: str = "User") -> str
```

异步函数，功能与 Chatbot.ask_stream 相同

<a id="revChatGPT.V0.Prompt"></a>

## Prompt 对象

```python
class Prompt()
```

带有构造提示的方法的提示类

<a id="revChatGPT.V0.Prompt.__init__"></a>

#### 初始化

```python
def __init__(buffer: int = None) -> None
```

使用基本提示符初始化提示

<a id="revChatGPT.V0.Prompt.add_to_chat_history"></a>

#### 增加到聊天记录

```python
def add_to_chat_history(chat: str) -> None
```

将聊天添加到聊天记录以备下次提示

<a id="revChatGPT.V0.Prompt.add_to_history"></a>

#### 增加到历史

```python
def add_to_history(user_request: str,
                   response: str,
                   user: str = "User") -> None
```

将请求/响应添加到聊天记录中以用于下一个提示

<a id="revChatGPT.V0.Prompt.history"></a>

#### 历史

```python
def history(custom_history: list = None) -> str
```

返回聊天记录

<a id="revChatGPT.V0.Prompt.construct_prompt"></a>

#### 构造提示

```python
def construct_prompt(new_prompt: str,
                     custom_history: list = None,
                     user: str = "User") -> str
```

根据聊天记录和请求构建提示

<a id="revChatGPT.V0.Conversation"></a>

## Conversation 对象

```python
class Conversation()
```

用于处理多个对话

<a id="revChatGPT.V0.Conversation.add_conversation"></a>

#### 增加 conversation

```python
def add_conversation(key: str, history: list) -> None
```

将历史记录列表添加到对话字典中，并将 id 作为键

<a id="revChatGPT.V0.Conversation.get_conversation"></a>

#### 获取 conversation

```python
def get_conversation(key: str) -> list
```

将历史记录列表添加到以 id 为键的对话字典中检索以 id 为键的对话字典中的历史记录列表

<a id="revChatGPT.V0.Conversation.remove_conversation"></a>

#### 移除 conversation

```python
def remove_conversation(key: str) -> None
```

从以 id 为键的对话字典中删除历史记录列表

<a id="revChatGPT.V0.Conversation.__str__"></a>

#### \_\_str\_\_

```python
def __str__() -> str
```

创建对话的 JSON 字符串

<a id="revChatGPT.V0.Conversation.save"></a>

#### 保存

```python
def save(file: str) -> None
```

将 conversation 保存为 JSON 文件

<a id="revChatGPT.V0.Conversation.load"></a>

#### 加载

```python
def load(file: str) -> None
```

从 JSON 文件加载 conversation
